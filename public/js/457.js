"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[457],{3457:(t,i,o)=>{o.r(i),o.d(i,{default:()=>r});function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function e(t,i,o){return(i=function(t){var i=function(t,i){if("object"!=a(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var e=o.call(t,i||"default");if("object"!=a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==a(i)?i:i+""}(i))in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}const n={data:function(){return{titulo:"EGRESO",meses:[],años:[],mes:null,año:null,notificacionValidad:!1,notificacionError:!1,colorNotificacion:"green",mensajeNoificacion:"",dialogDelete:!1,seleccionado:{},todoAnio:!1,imagenes:null,idEgreso:0,headers:[{text:"Id",value:"id"},{text:"RFC",value:"receptorRfc"},{text:"NOMBRE",value:"receptorNombre"},{text:"FECHA FACTURCION",value:"fechaFactura"},{text:"DESCRIPCION",value:"destino"},{text:"SOLICITUD",value:"solicitud"},{text:"AUTORIZACION",value:"autorizacion"},{text:"RECEPCION",value:"recepcion"},{text:"Editar",value:"actions",sortable:!1}],items:[],buscar:""}},created:function(){this.apiMeses(),this.apiAños()},watch:{mes:function(t,i){console.log(t+"cambio"+i),null!=this.año&&this.initialize()},año:function(t,i){localStorage.setItem("año",this.año),this.initialize()},todoAnio:function(t,i){this.initialize()}},methods:e(e(e(e(e(e({prueba:function(){null==this.$refs.egresoCaptura||this.$refs.egresoCaptura.actualizarAño(this.año)},cargaFotos:function(t){var i=this;console.log("--------------------"+this.idEgreso),this.imagenes=t,console.log(t);try{var o=new FormData;o.append("idEgreso",this.idEgreso);for(var a=0;a<this.imagenes.length;a++){var e=this.imagenes[a];o.append("imagenes["+a+"]",e),console.log("--")}axios.post("/consorcioceag/public/api/egresos/subirImagen",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log("entra "),i.$refs.fotos.cargarFotos(),console.log("finaliza ")})).catch((function(t){console.log(t)}))}catch(t){console.log("dsfsdf")}},pdfSolicitud:function(t){var i=this;this.loadingSolicitud=!0,axios.get("/consorcioceag/public/api/reporteEgresoSolicitud/"+t).then((function(t){window.open(t.data,"_blank"),i.loadingSolicitud=!1})).catch((function(t){i.mostrarNoificacion("No es posible cargar de "+i.titulo,!0),i.loadingSolicitud=!1})),this.loadingSolicitud=!1},pdfAutorizacion:function(t){var i=this;axios.get("/consorcioceag/public/api/reporteEgresoAutorizacion/"+t).then((function(t){window.open(t.data,"_blank")})).catch((function(t){i.mostrarNoificacion("No es posible cargar de "+i.titulo,!0)}))},pdfRecepcion:function(t){var i=this;axios.get("/consorcioceag/public/api/reporteRecepcion/"+t).then((function(t){window.open(t.data,"_blank")})).catch((function(t){i.mostrarNoificacion("No es posible cargar de "+i.titulo,!0)}))},initialize:function(){var t=this,i=JSON.parse(localStorage.getItem("_empresa"));this.todoAnio?axios.get("/consorcioceag/public/api/egresos/allegresosXml/0/"+this.año+"/"+i.id).then((function(i){t.items=i.data})).catch((function(i){t.mostrarNoificacion("No es posible cargar de "+t.titulo,!0)})):axios.get("/consorcioceag/public/api/egresos/allegresosXml/"+this.mes+"/"+this.año+"/"+i.id).then((function(i){t.items=i.data})).catch((function(i){t.mostrarNoificacion("No es posible cargar de "+t.titulo,!0)}))},Guardado:function(){this.mostrarNoificacion("Guardado con exito",!1),this.initialize()},cargarAño:function(t){},apiMeses:function(){var t=this;axios.get("/consorcioceag/public/api/meses").then((function(i){t.meses=i.data;var o=new Date;t.mes=o.getMonth()+1,console.log("   mes en emes "+t.mes)})).catch((function(i){t.mostrarNoificacion("No es posible cargar de "+t.titulo,!0)}))},apiAños:function(){var t=this;axios.get("/consorcioceag/public/api/años").then((function(i){t.años=i.data;var o=new Date;t.año=o.getFullYear()})).catch((function(i){t.mostrarNoificacion("No es posible cargar de "+t.titulo,!0)}))}},"Guardado",(function(){this.mostrarNoificacion("Guardado con exito",!1),this.initialize()})),"usuarioEditarGuardado",(function(){this.mostrarNoificacion("Editado Exitoso",!1),this.initialize()})),"mostrarNoificacion",(function(t,i){this.mensajeNoificacion=t,i?this.notificacionError=!0:this.notificacionValidad=!0})),"cambioEstatus",(function(t){this.dialogDelete=!0,this.seleccionado=t})),"noBorrar",(function(){this.initialize(),this.dialogDelete=!1})),"borrar",(function(){var t=this;axios.delete("/consorcioceag/public/api/menu/borrar/"+this.seleccionado.id).then((function(i){t.dialogDelete=!1,t.mostrarNoificacion("  ESTATUS ACTUALIZADO",!1),t.initialize()})).catch((function(i){console.log("error  usuario "+i),t.dialogDelete=!1,t.mostrarNoificacion("  ESTATUS  NO ACTUALIZADO",!0),t.initialize()}))}))};const r=(0,o(4486).A)(n,(function(){var t=this,i=t._self._c;return i("div",[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,search:t.buscar},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",[i("v-toolbar-title",[t._v(t._s(t.titulo)+" ")]),t._v(" "),i("v-text-field",{staticClass:"pt-6 pl-6",attrs:{name:"name",label:"Buscar",id:"id","append-icon":"mdi-magnify"},model:{value:t.buscar,callback:function(i){t.buscar=i},expression:"buscar"}}),t._v(" "),t.todoAnio?t._e():i("v-select",{staticClass:"pt-6 pl-6",attrs:{items:t.meses,label:"MES","item-text":"mes","item-value":"id"},model:{value:t.mes,callback:function(i){t.mes=i},expression:"mes"}}),t._v(" "),i("v-select",{staticClass:"pt-6 pl-6",attrs:{items:t.años,label:"AÑO","item-text":"año","item-value":"id"},model:{value:t.año,callback:function(i){t.año=i},expression:"año"}}),t._v(" "),i("v-checkbox",{staticClass:"pt-6 pl-6",attrs:{label:"TODO EL AÑO"},model:{value:t.todoAnio,callback:function(i){t.todoAnio=i},expression:"todoAnio"}}),t._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),i("v-dialog",{attrs:{transition:"scroll-y-transition","max-width":"1200"},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on,e=o.attrs;return[i("v-btn",t._g(t._b({attrs:{color:"primary"},on:{click:t.prueba}},"v-btn",e,!1),a),[t._v("Nuevo "+t._s(t.titulo))])]}},{key:"default",fn:function(o){return[i("v-card",[i("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("NUEVOS "+t._s(t.titulo.toUpperCase())+" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{text:""},on:{click:function(t){o.value=!1}}},[t._v("X")])],1),t._v(" "),i("EgresoCaptura",{ref:"egresoCaptura",attrs:{anio:t.año,cerrarDialogo:o},on:{Guardado:t.Guardado}}),t._v(" "),i("v-card-actions",{staticClass:"justify-end"})],1)]}}])}),t._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(i){t.dialogDelete=i},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v("ESTA SEGURO CAMBIAR ESTATUS ?")]),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(i){return t.noBorrar()}}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(i){return t.borrar()}}},[t._v("OK")]),t._v(" "),i("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.descripcion",fn:function(o){var a=o.item;return[i("div",[t._v("\n        "+t._s(a.descripcion.substring(0,10)+"....")+"\n      ")])]}},{key:"item.destino",fn:function(o){var a=o.item;return[i("div",[t._v("\n        "+t._s(" ***** DESCRIPCION ****** "+a.descripcion+" ***** FINALIDAD ****** "+a.destino)+"\n      ")])]}},{key:"item.icono",fn:function(o){var a=o.item;return[i("div",[i("v-icon",[t._v("\n          "+t._s(a.icono)+"\n        ")])],1)]}},{key:"item.solicitud",fn:function(o){var a=o.item;return[i("div",{attrs:{align:"center",justify:"center"}},[i("v-btn",{attrs:{small:"",dark:"",color:"green",fab:""},on:{click:function(i){return t.pdfSolicitud(a.id)}}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-file-pdf-box ")])],1)],1)]}},{key:"item.autorizacion",fn:function(o){var a=o.item;return[i("div",{attrs:{align:"center",justify:"center"}},[i("v-btn",{attrs:{small:"",dark:"",color:"green",fab:""},on:{click:function(i){return t.pdfAutorizacion(a.id)}}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-file-pdf-box ")])],1)],1)]}},{key:"item.recepcion",fn:function(o){var a=o.item;return[i("div",{attrs:{align:"center",justify:"center"}},[i("v-btn",{attrs:{small:"",dark:"",color:"green",fab:""},on:{click:function(i){return t.pdfRecepcion(a.id)}}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-file-pdf-box ")])],1)],1)]}},{key:"item.actions",fn:function(o){var a=o.item;return[i("v-dialog",{attrs:{"max-width":"1200"},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on,e=o.attrs;return[i("v-icon",t._g(t._b({staticClass:"pr-2",attrs:{color:"secondary",dark:""}},"v-icon",e,!1),a),[t._v("\n            mdi-pencil\n          ")])]}},{key:"default",fn:function(o){return[i("v-card",[i("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("EDITAR "+t._s(t.titulo.toUpperCase())+" "+t._s(a.email)+"\n              "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{text:""},on:{click:function(t){o.value=!1}}},[t._v("X")])],1),t._v(" "),i("br"),t._v(" "),i("EgresoEditarSolicitud",{attrs:{cerrarDialogo:o,egresoEntrada:a,anio:t.año},on:{Guardado:t.Guardado}}),t._v(" "),i("v-card-actions",{staticClass:"justify-end"})],1)]}}],null,!0)})]}},{key:"no-data",fn:function(){return[i("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}])}),t._v(" "),i("v-snackbar",{attrs:{timeout:1500,value:!0,color:"green",absolute:"",top:"",shaped:"",transition:"scroll-y-transition"},model:{value:t.notificacionValidad,callback:function(i){t.notificacionValidad=i},expression:"notificacionValidad"}},[t._v("\n    "+t._s(t.mensajeNoificacion)+"\n  ")]),t._v(" "),i("v-snackbar",{attrs:{timeout:1500,value:!0,color:"red",absolute:"",top:"",shaped:"",transition:"scroll-y-transition"},model:{value:t.notificacionError,callback:function(i){t.notificacionError=i},expression:"notificacionError"}},[t._v("\n    "+t._s(t.mensajeNoificacion)+"\n  ")])],1)}),[],!1,null,null,null).exports}}]);